ë¬¼ë¡ ì…ë‹ˆë‹¤. ì œëª©ì— ë§ì¶”ì–´ ì‹¤ì œ í”„ë¡œë•ì…˜ì— ë„ì… ê°€ëŠ¥í•œ ìˆ˜ì¤€ì˜ ê¸°ìˆ  ì„¤ëª…ê³¼ ì˜ˆì œë¥¼ í¬í•¨í•œ ì‹¤ì‹œê°„ ì±— UI êµ¬ì„± ì ˆì„ ìì„¸íˆ ì§‘í•„í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.



# 13.2 ì‹¤ì‹œê°„ ì±— UI ë§Œë“¤ê¸°

OpenAI APIë¥¼ í™œìš©í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ëŒ€í™”í˜• ê²½í—˜ì´ í•µì‹¬ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. íŠ¹íˆ ì‚¬ìš©ìê°€ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê³ , GPT ì‚¬ìš© ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°›ì•„ë³´ëŠ” "ì±— UI(chat user interface)"ëŠ” ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤(ì˜ˆ: ê³ ê°ì§€ì›, ê°œì¸ ë¹„ì„œ, êµìœ¡ í”Œë«í¼ ë“±)ì˜ ì¤‘ì‹¬ ì¸í„°í˜ì´ìŠ¤ë¡œ ìë¦¬ì¡ê³  ìˆìŠµë‹ˆë‹¤.

ì´ë²ˆ ì ˆì—ì„œëŠ” React ê¸°ë°˜ì˜ ì›¹ í”„ë¡ íŠ¸ë¥¼ í† ëŒ€ë¡œ ì‹¤ì‹œê°„ ì±— UIë¥¼ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì„ ì†Œê°œí•©ë‹ˆë‹¤. ì£¼ìš” êµ¬í˜„ ìš”ì†Œì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë©ë‹ˆë‹¤:

- React ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ ë° ìƒíƒœ ê´€ë¦¬
- OpenAI APIì™€ì˜ ë¹„ë™ê¸° í†µì‹ 
- ì‚¬ìš©ì ì…ë ¥ ë° ì‘ë‹µ íë¦„ ë Œë”ë§
- Streaming ì‘ë‹µ ì²˜ë¦¬ (ì„œë²„ ì¸¡ EventSource or WebSocket ëŒ€ì²´ ë°©ì‹ ë“±)
- UX í–¥ìƒì„ ìœ„í•œ ìµœì  ê¸°ëŠ¥ (ë¡œë”© ì¸ë””ì¼€ì´í„°, í‚¤ë³´ë“œ ì…ë ¥ í•¸ë“¤ë§ ë“±)



## 1. ì„¤ê³„ ê°œìš”

ìš°ë¦¬ê°€ ë§Œë“¤ ì±— UIëŠ” ë‹¤ìŒ êµ¬ì¡°ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•©ë‹ˆë‹¤:

- â–² ìƒë‹¨: "Chat with GPT" ì œëª© í‘œì‹œ
- â–’ ê°€ìš´ë°: ë©”ì‹œì§€ ëŒ€í™” ì˜ì—­ (user / assistant ë°œí™”ê°€ ì‹œê°„ ìˆœìœ¼ë¡œ ë‚˜ì—´)
- â–¼ í•˜ë‹¨: ì‚¬ìš©ì ì…ë ¥ìš© textarea & ì „ì†¡ ë²„íŠ¼

Reactì—ì„œëŠ” í•˜ë‚˜ì˜ ChatApp ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³ , í•„ìš”í•œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬ êµ¬ì„±í•©ë‹ˆë‹¤.

êµ¬í˜„ì— ì‚¬ìš©í•  ëŒ€í‘œ ê¸°ìˆ  ìŠ¤íƒ:

- Frontend: React (Hook ê¸°ë°˜)
- OpenAI API í˜¸ì¶œ ë°©ì‹: fetch
- Streaming (ì˜µì…˜): ReadableStream ê¸°ë°˜ ì²˜ë¦¬
- CSS í”„ë ˆì„ì›Œí¬: Tailwind CSS (ë˜ëŠ” ìˆœìˆ˜ CSS ê¸°ì¤€ ì˜ˆì‹œ ì œê³µ)



## 2. í”„ë¡œì íŠ¸ ì´ˆê¸°í™”

ë¨¼ì € React í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npx create-react-app openai-chat-ui --template cra-template-pwa
cd openai-chat-ui
npm install
```

.env íŒŒì¼ì— OpenAI API Keyë¥¼ ë„£ì–´ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤ (ë‹¨, ì‹¤ì œ ë°°í¬ ì‹œ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì£¼ì˜!)

```env
REACT_APP_OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
```

âš ï¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ API Keyë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ë³´ì•ˆìƒ ìœ„í—˜í•˜ë¯€ë¡œ í›„ë°˜ë¶€ì—ì„œ ì„œë²„ í”„ë¡ì‹œ í˜¹ì€ ë°±ì—”ë“œ API íŒ¨í„´ìœ¼ë¡œ ê°œì„ í•©ë‹ˆë‹¤.



## 3. ê¸°ë³¸ ì±— ì»´í¬ë„ŒíŠ¸ êµ¬ì„±

ë‹¤ìŒì€ ê¸°ë³¸ì ì¸ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ì…ë‹ˆë‹¤:

- `App.js`: ë£¨íŠ¸ ë Œë”ë§
- `ChatApp.jsx`: ì „ì²´ ì±— ì¸í„°í˜ì´ìŠ¤ UI
- `MessageList.jsx`: ë©”ì‹œì§€ ëª©ë¡ í‘œì‹œ
- `MessageInput.jsx`: ì‚¬ìš©ì ì…ë ¥ì°½

ì˜ˆì‹œ ë””ë ‰í† ë¦¬ êµ¬ì¡°:

```
src/
  â”œâ”€ components/
  â”‚   â”œâ”€ ChatApp.jsx
  â”‚   â”œâ”€ MessageList.jsx
  â”‚   â””â”€ MessageInput.jsx
```



## 4. ìƒíƒœ ê´€ë¦¬ êµ¬ì¡°

ìš°ë¦¬ëŠ” ë‹¤ìŒ ìƒíƒœë“¤ì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

```javascript
const [messages, setMessages] = useState([
  { role: "system", content: "You are a helpful assistant." },
  { role: "assistant", content: "ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?" }
]);

const [currentInput, setCurrentInput] = useState("");
const [isLoading, setIsLoading] = useState(false);
```



## 5. ë©”ì‹œì§€ ì…ë ¥ê³¼ ì „ì†¡ ì²˜ë¦¬

ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë°›ì•„ `messages` ë°°ì—´ì— ì¶”ê°€í•˜ê³  OpenAI APIë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

MessageInput.jsx:

```jsx
const MessageInput = ({ onSend, isLoading }) => {
  const [input, setInput] = useState("");

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim()) return;
    onSend(input);
    setInput("");
  };

  return (
    <form onSubmit={handleSubmit} className="flex gap-2 mt-2">
      <textarea
        rows={2}
        value={input}
        disabled={isLoading}
        onChange={(e) => setInput(e.target.value)}
        placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
        className="flex-1 border p-2 rounded"
      />
      <button
        type="submit"
        disabled={isLoading}
        className="bg-blue-500 text-white px-4 rounded"
      >
        ì „ì†¡
      </button>
    </form>
  );
};
```



## 6. OpenAI API í˜¸ì¶œ ë¡œì§ (ê¸°ë³¸ ì‘ë‹µ ëª¨ë“œ)

ChatApp.jsx ë‚´ë¶€ì—ì„œ ë©”ì‹œì§€ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ê³  ì‘ë‹µì„ ë°›ì•„ì˜¨ í›„ ìƒíƒœë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.

```javascript
const sendMessage = async (userInput) => {
  const newMessages = [
    ...messages,
    { role: "user", content: userInput }
  ];

  setMessages(newMessages);
  setIsLoading(true);

  try {
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: newMessages
      })
    });

    const data = await res.json();
    const reply = data.choices[0].message;

    setMessages([...newMessages, reply]);
  } catch (err) {
    console.error("API í˜¸ì¶œ ì˜¤ë¥˜", err);
  } finally {
    setIsLoading(false);
  }
};
```



## 7. ë©”ì‹œì§€ ëª©ë¡ ë Œë”ë§

```jsx
const MessageList = ({ messages }) => {
  return (
    <div className="flex flex-col gap-2 p-4 overflow-y-auto" style={{ height: "400px" }}>
      {messages.map((msg, idx) => (
        <div key={idx} className={`p-2 rounded ${msg.role === "user" ? 'bg-gray-200 text-right' : 'bg-green-100 text-left'}`}>
          <strong>{msg.role === "user" ? "ğŸ‘¤ ì‚¬ìš©ì" : "ğŸ¤– GPT"}:</strong> {msg.content}
        </div>
      ))}
    </div>
  );
};
```



## 8. ì‹¤ì‹œê°„ ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ (ì„ íƒ ê¸°ëŠ¥)

OpenAIì˜ GPT-4ì™€ GPT-3.5-turboëŠ” ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì˜µì…˜(stream: true)ì„ ì§€ì›í•©ë‹ˆë‹¤.

ì´ ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ ë‹µë³€ì„ í•œ ë²ˆì— ë°›ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì¡°ê°ì„ ìˆœì°¨ì ìœ¼ë¡œ ë°›ì•„ ì‚¬ìš©ìì—ê²Œ "ì‹¤ì‹œê°„" ëŠë‚Œì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
const handleStreamingResponse = async (userInput) => {
  const newMessages = [...messages, { role: "user", content: userInput }];
  setMessages(newMessages);
  setIsLoading(true);

  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`
    },
    body: JSON.stringify({
      model: "gpt-4",
      messages: newMessages,
      stream: true
    })
  });

  const reader = res.body.getReader();
  const decoder = new TextDecoder("utf-8");
  let fullText = "";

  while (true) {
    const { value, done } = await reader.read();
    if (done) break;

    const chunk = decoder.decode(value);
    const lines = chunk.split("\n");

    for (let line of lines) {
      if (line.startsWith("data: ")) {
        const dataStr = line.replace("data: ", "");
        if (dataStr === "[DONE]") break;

        const data = JSON.parse(dataStr);
        const delta = data.choices[0].delta.content || "";
        fullText += delta;

        setMessages([
          ...newMessages,
          { role: "assistant", content: fullText }
        ]);
      }
    }
  }

  setIsLoading(false);
};
```

ğŸ”” ì£¼ì˜: ìœ„ ë¡œì§ì—ì„œëŠ” ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µì„ ì‹¤ì‹œê°„ ë Œë”ë§ í•˜ê¸° ìœ„í•´ ë°˜ë³µì ìœ¼ë¡œ setStateë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ëŠ”ë°, ì´ëŠ” ì„±ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ throttle/debounce ë˜ëŠ” progressive rendering ìµœì í™” ê¸°ë²•ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



## 9. UX ìµœì í™” í¬ì¸íŠ¸

- ì „ì†¡ ë²„íŠ¼ ë¹„í™œì„±í™” ì²˜ë¦¬ (ì…ë ¥ ê³µë°± í˜¹ì€ ë¡œë”© ì¤‘)
- assistant ë©”ì‹œì§€ì— íƒ€ì´í•‘ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€ (CSS ì• ë‹ˆë©”ì´ì…˜ or í…ìŠ¤íŠ¸ ì ì§„ ì¶œë ¥)
- ìë™ ìŠ¤í¬ë¡¤:
  
```javascript
useEffect(() => {
  const container = document.getElementById("chat-scroll");
  container?.scrollTo({ top: container.scrollHeight, behavior: "smooth" });
}, [messages]);
```



## 10. ë³´ì•ˆìƒì˜ ì£¼ì˜ì 

- API í‚¤ë¥¼ React ë‚´ì— ì§ì ‘ ë…¸ì¶œí•˜ëŠ” ê²ƒì€ ë§¤ìš° ìœ„í—˜í•˜ë‹ˆ ë°˜ë“œì‹œ Backendë¥¼ ì¤‘ê³„í•˜ê²Œ í•©ë‹ˆë‹¤ (ì˜ˆ: Express API ê²½ìœ )
- production ë°°í¬ ì‹œ HTTP ëŒ€ì‹  HTTPS í•„ìˆ˜
- ì•…ì„± ì…ë ¥ ë°©ì§€ í•„í„° (ì˜ˆ: í”„ë¡¬í”„íŠ¸ ì¸ì ì…˜)

ê°„ë‹¨í•œ Express.js ë°±ì—”ë“œ ì˜ˆì‹œ:

```js
app.post("/api/chat", async (req, res) => {
  const { messages } = req.body;
  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: 'POST',
    headers: {
      Authorization: `Bearer ${process.env.OPENAI_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages,
    })
  });

  const data = await response.json();
  res.json(data);
});
```



## ì •ë¦¬

Reactë¥¼ ê¸°ë°˜ìœ¼ë¡œ OpenAI APIì™€ í†µì‹ í•˜ëŠ” ì‹¤ì‹œê°„ ì±— UIë¥¼ êµ¬í˜„í•˜ëŠ” í•µì‹¬ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ ìˆ˜ì§‘ â†’ ìƒíƒœ ì—…ë°ì´íŠ¸
- OpenAI API í˜¸ì¶œ â†’ assistant ì‘ë‹µ ìˆ˜ì‹ 
- ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µì˜ ê²½ìš° ì‘ë‹µ íë¦„ì„ ì²˜ë¦¬í•˜ì—¬ ì¸í„°ë™ì…˜ í–¥ìƒ
- ë©”ì‹œì§€ë¥¼ ì‹œê°„ ìˆœì„œëŒ€ë¡œ í”„ë¡ íŠ¸ì— ì¶œë ¥
- UXë¥¼ ìœ„í•œ ìŠ¤í¬ë¡¤/ë¡œë”© ì²˜ë¦¬ ë“± ë³´ê°•

ì´ UIëŠ” ì¶”í›„ LangChain, RAG, embedding ê¸°ë°˜ ê²€ìƒ‰ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ê³¼ë„ ê²°í•©í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ê¸°ì´ˆ êµ¬ì¡°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ë‹¤ìŒ ì ˆì—ì„œëŠ” ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ Gradio, Streamlit ë“±ì˜ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ í†µí•© ë°©ì‹ì„ ì‚´í´ë´…ë‹ˆë‹¤.

