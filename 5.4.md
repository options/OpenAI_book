## 5.4 시스템 지시문(System Prompt) 최적화 전략

GPT 기반 모델을 활용하는 데 있어 ‘시스템 지시문(system prompt)’은 결과물의 품질과 응답의 일관성을 결정짓는 핵심적인 요소입니다. 시스템 지시문은 대화 시작 전에 모델의 행동 양식을 정의하며, 주어진 사용자 요청에 대해 어떻게 응답해야 할지를 카탈리스트처럼 주도합니다. 이 절에서는 시스템 프롬프트(system prompt)의 개념을 정확히 이해하고, 다양한 활용 상황에 맞춰 최적화하는 전략을 구체적 사례와 함께 설명합니다.

### 5.4.1 시스템 지시문의 역할과 위치

GPT API의 Chat Completions 구조에서 메시지는 role 속성을 가집니다. 가장 흔히 등장하는 역할(role)은 다음 세 가지입니다:

- system
- user
- assistant

이 중 system 역할을 갖는 메시지가 바로 시스템 지시문입니다. 대화 초반에 설정되며, 모델의 전체 대화 컨텍스트(Context)에 영향을 주는 메시지입니다.

예시 구조:

```json
[
  { "role": "system", "content": "당신은 고객 상담을 전문으로 하는 친절한 AI입니다. 사용자에게 명확하고 간결하며 정중하게 응답하세요." },
  { "role": "user", "content": "환불받으려면 어떻게 해야 하나요?" }
]
```

이 프롬프트 구조에서 system 메시지는 모델에게 “무엇이 되어야 하는가(Who you are)”와 “어떻게 행동해야 하는가(How you should act)”를 규정합니다.



### 5.4.2 좋은 시스템 지시문의 특징

시스템 프롬프트는 단순한 설명이 아니라, 모델의 행동 양식을 계량적으로 지정하는 프로그래밍적 도구라고 볼 수 있습니다. 다음의 원칙에 따라 최적화해야 효과를 극대화할 수 있습니다:

| 특징              | 설명 |
|------------------|------|
| 구체성(Specificity)  |曖昧한 지시보다는 가능한 구체적인 역할, 대상, 스타일을 명시|
| 제한적 범위(Scope Control) |모델이 하지 말아야 할 것들을 함께 정의|
| 일관된 스타일(Messaging Consistency) |답변의 어조나 형식 통일성 유도|
| 지속가능성(Persistence)     |대화가 길어지더라도 지시 내용이 유지되어야 함|

예시 비교:

| 비추천 시스템 지시문 | 개선된 시스템 지시문 |
|-------------------|------------------|
| “도움을 주는 AI” | “당신은 기술 지원 담당자로서, 사용자의 질문에 대해 단계별로 친절하고 간결하게 답변하십시오. 문장 마지막엔 항상 느낌표 없이 마침표로 끝냅니다.” |



### 5.4.3 목적에 따른 시스템 지시문 구성 템플릿

좋은 프롬프트는 틀에서 시작합니다. 다음은 목적별 시스템 지시문 디자인 예시입니다.

#### 문서 요약 도우미

```text
당신은 전문가 수준의 문서 요약 도우미입니다. 사용자로부터 받은 긴 문서 내용을 핵심만 뽑아 3~5문장으로 요약하십시오. 반드시 객관적인 표현만 사용하고, 문서에 없는 정보는 추론하지 마십시오.
```

포인트:

- 역할(Role): 요약 도우미
- 방식(Method): 문장 수 제한, 요약된 표현
- 제약(Constraint): 주관적 해석 금지

#### 다국어 번역가

```text
당신은 전문 번역가입니다. 사용자 요청에 따라 정확하고 문화적으로 적절한 다국어 번역을 수행합니다. 직역보다 의역을 우선시하며, 기술용어는 유지하십시오.
```

포인트:

- 직역 vs 의역 우선순위 지정
- 전문 용어 처리 전략 명시

#### 튜터 스타일 AI

```text
당신은 CS 전공 초보자를 위한 Python 프로그래밍 튜터입니다. 학생의 질문에 대해 단계별로 설명하고, 개념과 예시를 결합해 직관적으로 알려줍니다. 가능한 한 쉬운 단어를 사용하고 용어는 각주를 달아 정의해 주십시오.
```

포인트:

- 청중(Audience)를 지정 (초보자)
- 스타일: 친절함, 단계별 설명
- 추가 기능: 각주 활용



### 5.4.4 시스템 지시문 작성 시 피해야 할 실수

몇 가지 대표적인 오류를 반드시 피해야 합니다.

| 실수 유형 | 설명 | 예시 |
|------------|------|------|
| 과도하게 일반적인 표현 | “도움이 되는 AI” 같은 애매한 지시 | 추론 범위가 넓어짐 |
| 역할 불명확 | “당신은 AI입니다” 만으로는 부족함 | 출력 스타일이 들쭉날쭉 |
| 지시 충돌 | 긍정과 부정을 함께 요구 | “직설적으로 하지만 친절하게도 말해라” |
| 배제 조건 미흡 | 하지 말아야 할 표현을 명시하지 않음 | 부적절한 설명 위험 |



### 5.4.5 시스템 지시문 최적화를 위한 실무 전략

최적의 시스템 프롬프트는 입력 → 테스트 → 수정의 반복 과정을 거쳐야 합니다.

#### 설정 항목 체크리스트

- [ ] 역할(Role)은 명확히 적었는가?
- [ ] 스타일(Style)는 일관되게 지시했는가?
- [ ] 목적(Task)이 구체적으로 드러났는가?
- [ ] 하지 말아야 할 행동이 명시됐는가?
- [ ] 따르고자 하는 예시(Output structure)가 포함됐는가?

#### 응답 평가 기준 확보

한 가지 시스템 지시문으로 다양한 질문을 테스트해보며 다음 항목을 기준 삼아 품질을 판단합니다:

- 정답률 (accuracy)
- 표현 일관성 (style consistency)
- 요약력 또는 단순화 수준
- 과잉 생성(over-generation) 방지 여부



### 5.4.6 시스템 프롬프트 + 유저 프롬프트 인터페이스 설계 전략

시스템 지시문은 ‘모델급 조작’이며, 사용자 프롬프트는 ‘콘텐츠급 조작’입니다. 이 두 층을 잘 구분하고 조화시켜야 좋은 결과가 나옵니다.

예를 들어:

```json
[
  {
    "role": "system",
    "content": "당신은 과학적 주제를 쉽게 설명하는 지식 큐레이터입니다. 항상 쉬운 언어를 사용하고, 비유를 적절히 활용하십시오."
  },
  {
    "role": "user",
    "content": "상대성 이론을 설명해줘."
  }
]
```

이 프레임워크에서 시스템은 ‘다 설명하되 쉽게’라는 방식 규정을, 사용자 프롬프트는 '무엇을 설명하라'는 구체적인 요청을 제공합니다.



### 5.4.7 시스템 지시문 성능 향상을 위한 고급 팁

#### 포맷 작성 가이드 추가

예:

```text
당신의 응답은 다음 형식을 따라야 합니다:

1. 개요
2. 상세 설명
3. 예시
4. 결론
```

이는 모델의 출력을 구조적으로 정리해주며, 문서나 응답 형태가 일관되게 유지되도록 돕습니다.

#### 응답 브레이크 조건 지정

```text
지식이 없거나 확신이 없는 경우 “해당 정보에 대한 명확한 근거가 없어 답변을 생성할 수 없습니다.”라고 응답하십시오.
```

이런 지시는 허구 생성(hallucination)을 줄이는데 효과적입니다.

#### 언어, 출처, 길이 제한 포함

```text
응답은 반드시 한국어로 작성하십시오. 각 응답은 500자 이내로 제한되며, 가능한 경우 신뢰할 수 있는 출처(위키백과 등)를 언급하십시오.
```

### 5.4.8 다국어 및 로컬라이제이션 대응

시스템 프롬프트에 명시적 언어 지정은 중요합니다. 예컨대:

```text
당신은 한국어 사용자에게 응대하는 AI입니다. 응답은 반드시 자연스러운 한국어로 하십시오. 외래어를 사용할 경우 괄호 안에 원어를 제공합니다.
```

이러한 설계는 자연스러운 다국어 챗봇을 만들 때 효과적입니다.

### 요약 정리

| 범주 | 전략 요약 |
|------|-----------|
| 설계 원칙 | 구체성, 명확성, 제약 조건을 포함한 역할 설계 |
| 활용 방안 | 사용 목적에 맞춘 프롬프트 템플릿 활용 |
| 검증 방법 | 체계적 응답 테스트와 평가 지표 설정 |
| 고급 전략 | 포맷 지시, 언어/길이 제한, 비허용 조건 명시 등 |

시스템 지시문은 단순한 한 줄 지침이 아니라, LLM을 유능한 조수로 만드는 ‘설명서’에 해당합니다. 잘 설계된 시스템 프롬프트는 프롬프트 엔지니어링의 50% 이상을 차지한다고 해도 과언이 아닙니다. Chapter 5의 다음 절에서는 이런 시스템 프롬프트를 실제 활용할 다양한 시나리오(고객응대, 학습, Q&A 등)에 적용하며 실습 예제를 진행합니다.